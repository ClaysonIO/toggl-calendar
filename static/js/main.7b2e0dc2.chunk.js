(this["webpackJsonptoggl-calendar"]=this["webpackJsonptoggl-calendar"]||[]).push([[0],{60:function(e,t,r){e.exports=r(93)},65:function(e,t,r){},87:function(e,t,r){},93:function(e,t,r){"use strict";r.r(t);var a,n,o,i,c=r(0),l=r.n(c),s=r(14),u=r.n(s),d=(r(65),r(9)),p=r(19),m=r(5),f=r(55),y=Object(m.a)((function(){var e=qe.selectedWorkSpace?{value:qe.selectedWorkSpace.id,label:qe.selectedWorkSpace.name}:void 0;return qe.workSpaces.length?l.a.createElement("div",{className:"select",style:{width:"200px"}},l.a.createElement(f.a,{onChange:function(e){var t=qe.workSpaces.find((function(t){return t.id===e.value}));qe.selectWorkSpace(t)},value:e,options:qe.workSpaces.map((function(e){return{value:e.id,label:e.name}}))})):l.a.createElement(l.a.Fragment,null)})),g=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{style:{width:"80px",height:"80px",marginLeft:0},href:"https://github.com/ClaysonIO/toggl-calendar",className:"github-corner","aria-label":"View source on GitHub",rel:"noopener noreferrer",target:"_blank"},l.a.createElement("svg",{width:"80",height:"80",viewBox:"0 0 250 250",style:{fill:"#ce6464",color:"#fff",position:"absolute",top:0,border:0,right:0},"aria-hidden":"true"},l.a.createElement("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),l.a.createElement("path",{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor",style:{transformOrigin:"130px 106px"},className:"octo-arm"}),l.a.createElement("path",{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor",className:"octo-body"}))),l.a.createElement("style",{dangerouslySetInnerHTML:{__html:"\n                .github-corner:hover \n                .octo-arm{animation:octocat-wave 560ms ease-in-out}\n                \n                @keyframes\n                octocat-wave{0 %,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}\n                \n                @media\n                (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}\n            "}}))},h=function(){return l.a.createElement("header",null,l.a.createElement(p.b,{to:"/main"},l.a.createElement("h1",null,"Toggl Calendar View")),l.a.createElement("div",{style:{flex:1}}),l.a.createElement(y,null),qe.workSpaces.length?l.a.createElement(p.b,{to:"/calendar"},"Calendar"):"",l.a.createElement(p.b,{to:"/settings"},"Settings"),l.a.createElement(g,null))},b=function(e){var t=e.children;return l.a.createElement(l.a.Fragment,null,l.a.createElement(h,null),l.a.createElement("main",null,t))},v=Object(m.a)((function(){var e=Object(d.g)();return l.a.createElement(b,null,l.a.createElement("h2",null,"Settings"),l.a.createElement("section",{style:{display:"flex",flexDirection:"column"}},l.a.createElement("label",{htmlFor:"apiToken"},l.a.createElement("h3",null,"Toggl API Token")),l.a.createElement("div",{style:{display:"flex"}},l.a.createElement("input",{id:"apiToken",style:{flex:1},placeholder:"Put your token here...",type:"password",value:qe.settings.apiToken,onChange:function(e){qe.settings.setApiToken(e.currentTarget.value)},onBlur:qe.getWorkSpaces}),l.a.createElement("button",{onClick:qe.getWorkSpaces,disabled:!qe.settings.apiToken},"Fetch Workspaces")),l.a.createElement("small",null,"Find your API token at the bottom of ",l.a.createElement("a",{href:"https://toggl.com/app/profile",rel:"noopener noreferrer",target:"_blank"},"toggl.com/app/profile")," ")),l.a.createElement("section",{style:{marginTop:"50px"}},l.a.createElement("div",{style:{display:"flex"}},l.a.createElement("h3",{style:{flex:1}},"Toggl Workspaces")),l.a.createElement("hr",null),qe.workSpaces.length?l.a.createElement("ul",null,qe.workSpaces.map((function(t,r){return l.a.createElement("div",{key:r,style:{width:"200px",margin:"5px"}},l.a.createElement("button",{style:{width:"100%"},onClick:function(){return r=t,qe.selectWorkSpace(r),void e.push("/calendar");var r},key:r},t.name))}))):l.a.createElement("h4",{style:{textAlign:"center"}},"- No Workspaces Retrieved - ")))})),w=r(8),j=r(12),O=r(13),E=r(3),k=(r(25),r(1)),S=(a=function(){function e(){Object(j.a)(this,e),Object(w.a)(this,"apiToken",n,this),this.apiToken=window.localStorage.getItem("togglApiToken")||""}return Object(O.a)(e,[{key:"setApiToken",value:function(e){this.apiToken=e,window.localStorage.setItem("togglApiToken",e)}}]),e}(),n=Object(E.a)(a.prototype,"apiToken",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(E.a)(a.prototype,"setApiToken",[k.action],Object.getOwnPropertyDescriptor(a.prototype,"setApiToken"),a.prototype),a),x=r(24),D=r(32),T=r(31),C=r(7),I=r.n(C),Y=r(57),H=r.n(Y);function P(e){var t=Math.floor(e),r=Math.round(60*(e-t));return 60===r&&(t+=1,r=0),"".concat(t,":").concat("0".concat(r>0?r:0).slice(-2))}function N(e){return e<=0?(0).toFixed(2):(.25*Math.round(e/.25)||.25).toFixed(2)}I.a.extend(H.a);var M,W,A,R,_,F,G,z,B,L,J,V,U,Z,$,q,K,Q,X,ee,te,re,ae,ne,oe,ie=(o=function(){function e(t){var r=t.date;Object(j.a)(this,e),Object(w.a)(this,"entries",i,this),this.date=void 0,this.date=r}return Object(O.a)(e,[{key:"addEntry",value:function(e){this.entries.push(e)}},{key:"tasksAndRoundedTime",get:function(){return this.entries.reduce((function(e,t){var r=e.find((function(e){return e.description===t.description}));return r||(r={description:t.description,dur:0},e.push(r)),r.dur+=t.dur,e}),[]).map((function(e){return"(".concat(N(I.a.duration(e.dur).asHours()),") ").concat(e.description)}))}},{key:"tasks",get:function(){return this.entries.reduce((function(e,t){return-1===e.indexOf(t.description)&&e.push(t.description),e}),[])}},{key:"timeAsHours",get:function(){return I.a.duration(this.entries.reduce((function(e,t){return e+t.dur}),0)).asHours()}},{key:"hours",get:function(){return P(I.a.duration(this.entries.reduce((function(e,t){return e+t.dur}),0)).asHours())}},{key:"roundedHours",get:function(){return N(I.a.duration(this.entries.reduce((function(e,t){return e+t.dur}),0)).asHours())}}]),e}(),i=Object(E.a)(o.prototype,"entries",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(E.a)(o.prototype,"addEntry",[k.action],Object.getOwnPropertyDescriptor(o.prototype,"addEntry"),o.prototype),Object(E.a)(o.prototype,"tasksAndRoundedTime",[k.computed],Object.getOwnPropertyDescriptor(o.prototype,"tasksAndRoundedTime"),o.prototype),Object(E.a)(o.prototype,"tasks",[k.computed],Object.getOwnPropertyDescriptor(o.prototype,"tasks"),o.prototype),Object(E.a)(o.prototype,"timeAsHours",[k.computed],Object.getOwnPropertyDescriptor(o.prototype,"timeAsHours"),o.prototype),Object(E.a)(o.prototype,"hours",[k.computed],Object.getOwnPropertyDescriptor(o.prototype,"hours"),o.prototype),Object(E.a)(o.prototype,"roundedHours",[k.computed],Object.getOwnPropertyDescriptor(o.prototype,"roundedHours"),o.prototype),o),ce=(M=k.action.bound,W=function(){function e(t){var r=t.workSpace;Object(j.a)(this,e),this.rowId=(1e9*Math.random()).toString(),this.name="",Object(w.a)(this,"entries",A,this),Object(w.a)(this,"days",R,this),Object(w.a)(this,"color",_,this),this.workSpace=void 0,this.type=void 0,this.workSpace=r,this.setExpanded=this.setExpanded.bind(this)}return Object(O.a)(e,[{key:"expanded",get:function(){return this.workSpace.expanded.indexOf(this.rowId)>-1}}]),Object(O.a)(e,[{key:"setEmails",value:function(e){this.workSpace.setEmailItem({rowId:this.rowId,emails:e})}},{key:"createEmail",value:function(e){this.setEmails(this.emails.concat(e))}},{key:"setExpanded",value:function(e){var t=this;this.expanded&&!e?this.workSpace.setExpanded(this.workSpace.expanded.filter((function(e){return e!==t.rowId}))):!this.expanded&&e&&this.workSpace.setExpanded(this.workSpace.expanded.concat([this.rowId]))}},{key:"getDates",value:function(e,t){var r=I()(e).startOf("day"),a=I()(t).endOf("day");return this.days.filter((function(e){return e.date.isAfter(r)&&e.date.isBefore(a)||e.date.isSame(r,"day")||e.date.isSame(a,"day")}))}},{key:"timeAsHours",value:function(e,t){return this.getDates(e,t).reduce((function(e,t){return e+t.timeAsHours}),0)}},{key:"hours",value:function(e,t){var r=this.timeAsHours(e,t),a=Math.floor(r),n=Math.round(60*(r-a));return"".concat(a,":").concat("0".concat(n>0?n:0).slice(-2))}},{key:"roundedHours",value:function(e,t){return(.25*Math.round(this.timeAsHours(e,t)/.25)).toFixed(2)}},{key:"tasks",value:function(e,t){return this.getDates(e,t).reduce((function(e,t){return e.concat(t.entries)}),[]).reduce((function(e,t){return-1===e.indexOf(t.description)&&e.push(t.description),e}),[]).sort((function(e,t){return e.localeCompare(t,"en")}))}},{key:"emails",get:function(){return this.workSpace.rowToEmailHash[this.rowId]||[]}},{key:"dateHash",get:function(){return this.days.reduce((function(e,t){return e[t.date.format("YYYYMMDD")]=t,e}),{})}}]),e}(),A=Object(E.a)(W.prototype,"entries",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=Object(E.a)(W.prototype,"days",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(E.a)(W.prototype,"expanded",[k.computed],Object.getOwnPropertyDescriptor(W.prototype,"expanded"),W.prototype),_=Object(E.a)(W.prototype,"color",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"#ff8330"}}),Object(E.a)(W.prototype,"emails",[k.computed],Object.getOwnPropertyDescriptor(W.prototype,"emails"),W.prototype),Object(E.a)(W.prototype,"createEmail",[M],Object.getOwnPropertyDescriptor(W.prototype,"createEmail"),W.prototype),Object(E.a)(W.prototype,"dateHash",[k.computed],Object.getOwnPropertyDescriptor(W.prototype,"dateHash"),W.prototype),Object(E.a)(W.prototype,"setExpanded",[k.action],Object.getOwnPropertyDescriptor(W.prototype,"setExpanded"),W.prototype),W),le=(F=function(e){Object(D.a)(r,e);var t=Object(T.a)(r);function r(e,a){var n,o=e.name,i=e.project;return Object(j.a)(this,r),(n=t.call(this,{workSpace:a})).name=void 0,n.project=void 0,n.type="tag",Object(w.a)(n,"entries",G,Object(x.a)(n)),Object(w.a)(n,"days",z,Object(x.a)(n)),n.name=o,n.project=i,n}return Object(O.a)(r,[{key:"addEntry",value:function(e){this.entries.push(e);var t=this.dateHash[e.date.format("YYYYMMDD")];t||(t=new ie({date:e.date}),this.days.push(t)),t.addEntry(e)}}]),r}(ce),G=Object(E.a)(F.prototype,"entries",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=Object(E.a)(F.prototype,"days",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(E.a)(F.prototype,"addEntry",[k.action],Object.getOwnPropertyDescriptor(F.prototype,"addEntry"),F.prototype),F),se=(B=function(e){Object(D.a)(r,e);var t=Object(T.a)(r);function r(e,a){var n,o=e.pid,i=e.project,c=e.client,l=e.project_hex_color;return Object(j.a)(this,r),(n=t.call(this,{workSpace:a})).pid=void 0,n.client=void 0,Object(w.a)(n,"tags",L,Object(x.a)(n)),n.type="project",n.rowId=o.toString(),n.pid=o,n.name=i||"Without Project",n.client=c,n.color=l,n}return Object(O.a)(r,[{key:"addEntry",value:function(e){this.entries.push(e);var t=this.dateHash[e.date.format("YYYYMMDD")];t||(t=new ie({date:e.date}),this.days.push(t)),t.addEntry(e);var r=this.tags.find((function(t){return t.name===e.tags}));r||(r=new le({name:e.tags,project:this},this.workSpace),this.tags=this.tags.concat([r]).sort((function(e,t){return t.name.localeCompare(e.name,"en",{numeric:!0})}))),r.addEntry(e)}},{key:"setGroup",value:function(e){var t=this,r=e.group;this.workSpace.groups.forEach((function(e){var a=e.projectIds.filter((function(e){return e!==t.rowId}));e===r&&a.push(t.rowId),e.setProjectIds(a)})),this.workSpace.setGroups()}}]),r}(ce),L=Object(E.a)(B.prototype,"tags",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(E.a)(B.prototype,"addEntry",[k.action],Object.getOwnPropertyDescriptor(B.prototype,"addEntry"),B.prototype),B),ue=r(43),de=r.n(ue),pe=function(){function e(){Object(j.a)(this,e)}return Object(O.a)(e,null,[{key:"GetUser",value:function(e){return new Promise((function(t,r){de.a.get("https://api.track.toggl.com/api/v9/workspaces",{auth:{username:e,password:"api_token"}}).then((function(e){var r=e.data;t({workspaces:r})})).catch((function(e){return r(e)}))}))}},{key:"FetchDateRangeDetails",value:function(t,r,a,n,o,i){return new Promise((function(c,l){var s,u=[],d=i||1;de.a.get("https://track.toggl.com/reports/api/v2/details",{params:{since:n.isBefore(o)?n.format("YYYY-MM-DD"):o.format("YYYY-MM-DD"),until:n.isBefore(o)?o.format("YYYY-MM-DD"):n.format("YYYY-MM-DD"),user_agent:window.location.origin,workspace_id:a.toString(),user_ids:null===(s=qe.user)||void 0===s?void 0:s.id,page:d},auth:{username:t,password:"api_token"}}).then((function(e){return e.data})).then((function(i){u=u.concat(i.data),i.data.length<i.per_page?c(u):setTimeout((function(){e.FetchDateRangeDetails(t,r,a,n,o,d+1).then((function(e){return c(u.concat(e))})).catch((function(e){return l(e)}))}),1e3)})).catch((function(e){l(e)}))}))}}]),e}(),me=function e(t){var r=t.description,a=t.dur,n=t.start,o=t.tags;Object(j.a)(this,e),this.description=void 0,this.dur=void 0,this.date=void 0,this.tags=void 0,this.description=r,this.dur=a,this.date=I()(n),this.tags=o.join(", ")},fe=(J=function(e){Object(D.a)(r,e);var t=Object(T.a)(r);function r(e,a){var n,o=e.name,i=e.rowId,c=e.projectIds,l=e.color;return Object(j.a)(this,r),n=t.call(this,{workSpace:a}),Object(w.a)(n,"projectIds",V,Object(x.a)(n)),Object(w.a)(n,"name",U,Object(x.a)(n)),n.type="group",n.name=o,n.projectIds=c||n.projectIds,n.rowId=i||"Group_".concat(o),n.color=l||n.color,n}return Object(O.a)(r,[{key:"setColor",value:function(e){this.color=e,this.workSpace.setGroups()}},{key:"setName",value:function(e){this.name=e,this.workSpace.setGroups()}},{key:"setProjectIds",value:function(e){this.projectIds=e}},{key:"serialize",value:function(){return JSON.stringify({rowId:this.rowId,name:this.name,projectIds:this.projectIds,color:this.color})}},{key:"projects",get:function(){var e=this;return this.workSpace.projects.filter((function(t){return e.projectIds.indexOf(t.rowId)>-1}))}},{key:"days",get:function(){return Object.values(this.projects.reduce((function(e,t){return t.days.forEach((function(r){e[r.date.format("YYYYMMDD")]||(e[r.date.format("YYYYMMDD")]=new ie({date:r.date})),r.entries.forEach((function(a){e[r.date.format("YYYYMMDD")].addEntry(new me({description:[t.client,t.name,a.description].filter((function(e){return e})).join(" / "),dur:a.dur,start:a.date.toISOString(),tags:a.tags.split(", ")}))}))})),e}),{}))}},{key:"entries",get:function(){return this.projects.reduce((function(e,t){return e.concat(t.entries)}),[])}}],[{key:"deserialize",value:function(e,t){return new r(JSON.parse(e),t)}}]),r}(ce),V=Object(E.a)(J.prototype,"projectIds",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=Object(E.a)(J.prototype,"name",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(E.a)(J.prototype,"projects",[k.computed],Object.getOwnPropertyDescriptor(J.prototype,"projects"),J.prototype),Object(E.a)(J.prototype,"days",[k.computed],Object.getOwnPropertyDescriptor(J.prototype,"days"),J.prototype),Object(E.a)(J.prototype,"setColor",[k.action],Object.getOwnPropertyDescriptor(J.prototype,"setColor"),J.prototype),Object(E.a)(J.prototype,"setName",[k.action],Object.getOwnPropertyDescriptor(J.prototype,"setName"),J.prototype),Object(E.a)(J.prototype,"entries",[k.computed],Object.getOwnPropertyDescriptor(J.prototype,"entries"),J.prototype),Object(E.a)(J.prototype,"setProjectIds",[k.action],Object.getOwnPropertyDescriptor(J.prototype,"setProjectIds"),J.prototype),J),ye=(Z=k.action.bound,$=function(){function e(t,r){var a=t.id,n=t.name,o=t.api_token;Object(j.a)(this,e),this.id=void 0,this.name=void 0,this.api_token=void 0,Object(w.a)(this,"projectOrder",q,this),Object(w.a)(this,"loading",K,this),Object(w.a)(this,"projects",Q,this),Object(w.a)(this,"groups",X,this),Object(w.a)(this,"expanded",ee,this),Object(w.a)(this,"rowToEmailHash",te,this),this.id=a,this.name=n,this.api_token=r||o,this.projectOrder=JSON.parse(window.localStorage.getItem("workspaceOrder_".concat(a))||"[]"),this.getGroups(),this.getExpanded(),this.getRowToEmailHash()}return Object(O.a)(e,[{key:"setExpanded",value:function(e){this.expanded=e,window.localStorage.setItem("workspaceExpanded_".concat(this.id),JSON.stringify(e))}},{key:"getExpanded",value:function(){var e=window.localStorage.getItem("workspaceExpanded_".concat(this.id));this.expanded=JSON.parse(e||"[]")}},{key:"setEmailItem",value:function(e){var t=e.rowId,r=e.emails;this.rowToEmailHash[t]=r,window.localStorage.setItem("workspaceEmailHash_".concat(this.id),JSON.stringify(this.rowToEmailHash))}},{key:"getRowToEmailHash",value:function(){var e=window.localStorage.getItem("workspaceEmailHash_".concat(this.id));this.rowToEmailHash=JSON.parse(e||"{}")}},{key:"getGroups",value:function(){var e=this,t=window.localStorage.getItem("workspaceGroups_".concat(this.id));this.groups=JSON.parse(t||"[]").map((function(t){return fe.deserialize(t,e)}))}},{key:"setGroups",value:function(){var e=JSON.stringify(this.groups.map((function(e){return e.serialize()})));window.localStorage.setItem("workspaceGroups_".concat(this.id),e)}},{key:"orderProject",value:function(e){var t=e.destination,r=e.source;e.reason;if(r&&t){var a=this.projectOrder.slice(),n=a.splice(r.index,1).pop();a.splice(t.index,0,n),this.projectOrder=a,window.localStorage.setItem("workspaceOrder_".concat(this.id),JSON.stringify(a))}}},{key:"setLoading",value:function(e){this.loading=e}},{key:"createGroup",value:function(e){var t=new fe({name:e},this);return this.groups.filter((function(e){return e.rowId===t.rowId})).length||(this.groups=this.groups.concat(t),this.setGroups(),-1===this.projectOrder.indexOf(t.rowId)&&(this.projectOrder=this.projectOrder.concat([t.rowId]))),this.groups.find((function(e){return e.rowId===t.rowId}))}},{key:"addTasksToProjects",value:function(e){var t=this,r={},a=[];e.forEach((function(e){if(e.pid||(e.pid=0),!r[e.pid]){var n=new se(e,t);a.push(n),r[n.pid]=n,-1===t.projectOrder.indexOf(n.rowId)&&(t.projectOrder=t.projectOrder.concat([n.rowId]))}r[e.pid].addEntry(new me(e))})),Object(k.runInAction)((function(){t.projects=a}))}},{key:"getTasks",value:function(e,t){var r=this;return this.setLoading(!0),new Promise((function(a,n){var o;(null===(o=qe.user)||void 0===o?void 0:o.id)&&pe.FetchDateRangeDetails(r.api_token,qe.user.id,r.id.toString(),e,t).then((function(e){r.addTasksToProjects(e),a(e)})).catch((function(e){return n(e)})).finally((function(){return r.setLoading(!1)}))}))}},{key:"sumDay",value:function(e){return e?this.projects.reduce((function(t,r){var a;return t+((null===(a=r.days.find((function(t){return t.date.isSame(e,"day")})))||void 0===a?void 0:a.timeAsHours)||0)}),0):0}},{key:"sumWeek",value:function(e,t){return e&&t?this.projects.reduce((function(r,a){return r+a.timeAsHours(e.format("YYYY-MM-DD"),t.format("YYYY-MM-DD"))}),0):0}},{key:"sumDayClockTime",value:function(e){return P(this.sumDay(e))}},{key:"sumDayRoundedHours",value:function(e){return N(this.sumDay(e))}},{key:"sumWeekClockTime",value:function(e,t){return P(this.sumWeek(e,t))}},{key:"sumWeekRoundedHours",value:function(e,t){return N(this.sumWeek(e,t))}},{key:"toInterface",value:function(){return{id:this.id,name:this.name,api_token:this.api_token}}},{key:"emails",get:function(){return Object.values(this.rowToEmailHash).reduce((function(e,t){return e.concat(t)}),[]).reduce((function(e,t){return-1===e.indexOf(t)&&e.push(t),e}),[]).sort((function(e,t){return e.localeCompare(t,"en")}))}},{key:"emailToRowHash",get:function(){var e=this;return Object.keys(this.rowToEmailHash).reduce((function(t,r){return e.rowToEmailHash[r].forEach((function(e){t[e]||(t[e]=[]),t[e].push(r)})),t}),{})}},{key:"emailRows",get:function(){var e=this;return this.emails.map((function(t){var r;return{email:t,rows:null===(r=e.emailToRowHash[t])||void 0===r?void 0:r.map((function(t){return e.GroupHash[t]&&e.GroupHash[t].projects.length?e.GroupHash[t]:e.ProjectHash[t]?e.ProjectHash[t]:e.TagHash[t]?e.TagHash[t]:void 0})).filter((function(e){return e}))}}))}},{key:"GroupHash",get:function(){return this.groups.reduce((function(e,t){return e[t.rowId]=t,e}),{})}},{key:"ProjectHash",get:function(){return this.projects.reduce((function(e,t){return e[t.rowId]=t,e}),{})}},{key:"TagHash",get:function(){return this.projects.reduce((function(e,t){return t.tags.filter((function(e){return e})).forEach((function(t){e[t.rowId]=t})),e}),{})}},{key:"orderedProjects",get:function(){var e=this,t=this.groups.reduce((function(e,t){return e.concat(t.projectIds)}),[]);return this.projectOrder.map((function(r){if(t.indexOf(r)>-1)return null;var a=e.projects.find((function(e){return e.rowId===r}));if(a)return a;var n=e.groups.find((function(e){return e.rowId===r}));return n&&n.projects.length?n:null}))}}]),e}(),q=Object(E.a)($.prototype,"projectOrder",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=Object(E.a)($.prototype,"loading",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Q=Object(E.a)($.prototype,"projects",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=Object(E.a)($.prototype,"groups",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ee=Object(E.a)($.prototype,"expanded",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),te=Object(E.a)($.prototype,"rowToEmailHash",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Object(E.a)($.prototype,"setExpanded",[k.action],Object.getOwnPropertyDescriptor($.prototype,"setExpanded"),$.prototype),Object(E.a)($.prototype,"getExpanded",[k.action],Object.getOwnPropertyDescriptor($.prototype,"getExpanded"),$.prototype),Object(E.a)($.prototype,"setEmailItem",[k.action],Object.getOwnPropertyDescriptor($.prototype,"setEmailItem"),$.prototype),Object(E.a)($.prototype,"emails",[k.computed],Object.getOwnPropertyDescriptor($.prototype,"emails"),$.prototype),Object(E.a)($.prototype,"getRowToEmailHash",[k.action],Object.getOwnPropertyDescriptor($.prototype,"getRowToEmailHash"),$.prototype),Object(E.a)($.prototype,"emailToRowHash",[k.computed],Object.getOwnPropertyDescriptor($.prototype,"emailToRowHash"),$.prototype),Object(E.a)($.prototype,"emailRows",[k.computed],Object.getOwnPropertyDescriptor($.prototype,"emailRows"),$.prototype),Object(E.a)($.prototype,"GroupHash",[k.computed],Object.getOwnPropertyDescriptor($.prototype,"GroupHash"),$.prototype),Object(E.a)($.prototype,"TagHash",[k.computed],Object.getOwnPropertyDescriptor($.prototype,"TagHash"),$.prototype),Object(E.a)($.prototype,"orderProject",[Z],Object.getOwnPropertyDescriptor($.prototype,"orderProject"),$.prototype),Object(E.a)($.prototype,"orderedProjects",[k.computed],Object.getOwnPropertyDescriptor($.prototype,"orderedProjects"),$.prototype),Object(E.a)($.prototype,"setLoading",[k.action],Object.getOwnPropertyDescriptor($.prototype,"setLoading"),$.prototype),Object(E.a)($.prototype,"createGroup",[k.action],Object.getOwnPropertyDescriptor($.prototype,"createGroup"),$.prototype),Object(E.a)($.prototype,"addTasksToProjects",[k.action],Object.getOwnPropertyDescriptor($.prototype,"addTasksToProjects"),$.prototype),$),ge=function(){function e(t){var r=t.id,a=t.fullname;Object(j.a)(this,e),this.id=void 0,this.fullname=void 0,this.id=r,this.fullname=a}return Object(O.a)(e,[{key:"toInterface",value:function(){return{id:this.id,fullname:this.fullname}}}]),e}(),he=(re=function(){function e(){if(Object(j.a)(this,e),this.settings=void 0,Object(w.a)(this,"user",ae,this),Object(w.a)(this,"workSpaces",ne,this),Object(w.a)(this,"selectedWorkSpace",oe,this),this.settings=new S,this.settings.apiToken){var t=JSON.parse(window.localStorage.getItem("workSpaces")||"[]"),r=window.localStorage.getItem("user")?JSON.parse(window.localStorage.getItem("user")||""):void 0;this.setWorkSpaces(t.map((function(e){return new ye(e)}))),this.setUser(r?new ge(r):void 0)}this.getWorkSpaces=this.getWorkSpaces.bind(this)}return Object(O.a)(e,[{key:"selectWorkSpace",value:function(e){var t;this.selectedWorkSpace=e,window.localStorage.setItem("workSpaceId",(null===(t=this.selectedWorkSpace)||void 0===t?void 0:t.id.toString())||"")}},{key:"setUser",value:function(e){this.user=e,e?window.localStorage.setItem("user",JSON.stringify(e.toInterface())):window.localStorage.removeItem("user")}},{key:"getWorkSpaces",value:function(){var e=this;this.settings.apiToken&&pe.GetUser(this.settings.apiToken).then((function(t){e.setUser(new ge(t)),e.setWorkSpaces(t.workspaces.map((function(t){return new ye(t,e.settings.apiToken)})))})).catch((function(e){return alert(e)}))}},{key:"setWorkSpaces",value:function(e){this.workSpaces=e.sort((function(e,t){return e.name.toLowerCase().localeCompare(t.name.toLowerCase(),"en",{numeric:!0})})),window.localStorage.setItem("workSpaces",JSON.stringify(this.workSpaces.map((function(e){return e.toInterface()}))));var t=window.localStorage.getItem("workSpaceId");t&&this.selectWorkSpace(this.workSpaces.find((function(e){return e.id.toString()===t})))}}]),e}(),ae=Object(E.a)(re.prototype,"user",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=Object(E.a)(re.prototype,"workSpaces",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),oe=Object(E.a)(re.prototype,"selectedWorkSpace",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(E.a)(re.prototype,"selectWorkSpace",[k.action],Object.getOwnPropertyDescriptor(re.prototype,"selectWorkSpace"),re.prototype),Object(E.a)(re.prototype,"setUser",[k.action],Object.getOwnPropertyDescriptor(re.prototype,"setUser"),re.prototype),Object(E.a)(re.prototype,"setWorkSpaces",[k.action],Object.getOwnPropertyDescriptor(re.prototype,"setWorkSpaces"),re.prototype),re),be=r(23),ve=function(e){var t=e.date;return l.a.createElement("div",{style:{overflow:"hidden"}},l.a.createElement("div",null,t.format("dddd")),l.a.createElement("div",null,t.format("MMM D")))},we=Object(m.a)((function(e){var t=e.dates,r=e.gridCols;return l.a.createElement("div",{className:"row header",style:{gridTemplateColumns:r}},l.a.createElement("div",null),l.a.createElement("div",null,"Project"),l.a.createElement("div",null,"Company"),t.map((function(e,t){return l.a.createElement(ve,{key:t,date:e})})),l.a.createElement("div",{className:"sumCol"},"Sum of Time"))})),je=(r(87),Object(m.a)((function(e){var t=e.expanded,r=e.setExpanded;return l.a.createElement("button",{className:"expander",onClick:function(){return r(!t)}},l.a.createElement("div",{className:"rotater ".concat(t?"rotated":"")},"\u25b6"))}))),Oe=r(59),Ee=(r(88),function(e){var t=e.day,r=e.displayType,a=(e.expanded,Object(c.useState)(!1)),n=Object(be.a)(a,2),o=n[0],i=n[1],s=function(){return i(!1)};var u="",d="";if(t)switch(r){case"description":u=t.tasks.map((function(e,t){return l.a.createElement("div",{key:t},e)})),d=t.tasks.join("\n");break;case"time":u=t.hours,d=t.hours;break;case"roundedTime":u=t.roundedHours,d=t.roundedHours;break;case"tasksAndTime":u=t.tasksAndRoundedTime.map((function(e,t){return l.a.createElement("div",{key:t},e)})),d=t.tasksAndRoundedTime.join("\n")}return l.a.createElement("div",{className:"dateCol",title:d},l.a.createElement(Oe.a,{content:"Copied: \n ".concat(d),visible:o,onClickOutside:s},l.a.createElement("button",{onClick:function(e){var t,r,a=document.createRange(),n=e.currentTarget;n&&(a.selectNode(n),null===(t=window.getSelection())||void 0===t||t.removeAllRanges(),null===(r=window.getSelection())||void 0===r||r.addRange(a),document.execCommand("copy"),i(!0),setTimeout((function(){s()}),2e3))}},u)))});function ke(e,t){switch(t){case"description":return N(e);case"time":return P(e);case"roundedTime":case"tasksAndTime":return N(e)}}var Se=r(27),xe=r(30),De=Object(m.a)((function(e){var t=e.tag,r=e.setOpen;return l.a.createElement(xe.a,{onOpen:function(){return r(!0)},onClose:function(){return r(!1)},trigger:l.a.createElement("div",null,l.a.createElement("button",{className:"menuButton"},"\u25cf\u25cf\u25cf")),position:"left center"},l.a.createElement("div",{style:{backgroundColor:"#fff",border:"1px solid ".concat(t.color),padding:"10px",width:"200px",boxShadow:"0 2px .8rem ".concat(t.color)}},"Set Emails",l.a.createElement(Se.a,{placeholder:"Select or Create New",isMulti:!0,value:t.emails.map((function(e){return{value:e,label:e}})),options:t.workSpace.emails.map((function(e){return{value:e,label:e}})),onCreateOption:t.createEmail,onChange:function(e){return t.setEmails((e||[]).map((function(e){return e.value})))}})))})),Te=Object(m.a)((function(e){var t,r,a=e.tag,n=e.dates,o=e.displayType,i=e.gridCols,s=e.inheritBackgroundColor,u=Object(c.useState)(!1),d=Object(be.a)(u,2),p=d[0],m=d[1];return l.a.createElement("div",{className:"rowContainer",style:{boxShadow:"".concat(p?"0 2px .8rem":"0 0 0"," ").concat(a.color)}},l.a.createElement("div",{className:"row tagRow",style:{gridTemplateColumns:i,borderColor:a.project.color,backgroundColor:s?"rgba(255,255,255,0.9)":"#FFF"}},l.a.createElement("div",null),l.a.createElement(je,{expanded:a.expanded,setExpanded:a.setExpanded}),l.a.createElement("div",{className:"",style:{color:a.project.color}},a.name||"--Untagged--"),n.map((function(e,t){return l.a.createElement(Ee,{key:t,expanded:a.expanded,displayType:o,day:a.dateHash[e.format("YYYYMMDD")]})})),l.a.createElement("div",{className:"title sumCol",style:{color:a.project.color}},ke(a.timeAsHours(null===(t=n[0])||void 0===t?void 0:t.toISOString(),null===(r=n[n.length-1])||void 0===r?void 0:r.toISOString()),o)),a.name?l.a.createElement(De,{tag:a,setOpen:m}):l.a.createElement(l.a.Fragment,null)))})),Ce=function(e){var t=e.day,r=e.rows,a=e.displayType,n=r.reduce((function(e,r){var a;return e+((null===r||void 0===r||null===(a=r.dateHash[t.format("YYYYMMDD")])||void 0===a?void 0:a.timeAsHours)||0)}),0);return l.a.createElement("div",null,l.a.createElement("div",{className:"title"},ke(n,a)))},Ie=Object(m.a)((function(e){var t=e.dates,r=e.rows,a=e.displayType,n=e.gridCols,o=t.reduce((function(e,t){return e+r.reduce((function(e,r){var a;return e+((null===r||void 0===r||null===(a=r.dateHash[t.format("YYYYMMDD")])||void 0===a?void 0:a.timeAsHours)||0)}),0)}),0);return l.a.createElement("div",{className:"row projectRow",style:{gridTemplateColumns:n}},l.a.createElement("div",null),l.a.createElement("div",{className:"title"},"Total"),l.a.createElement("div",null),t.map((function(e,t){return l.a.createElement(Ce,{key:t,day:e,rows:r,displayType:a})})),l.a.createElement("div",{className:"title sumCol"},ke(o,a)))})),Ye=function(){return l.a.createElement("div",{className:"lds-ripple"},l.a.createElement("div",null),l.a.createElement("div",null))},He=r(28),Pe=Object(m.a)((function(e){var t=e.project,r=e.setOpen,a=Object(c.useMemo)((function(){return qe.selectedWorkSpace}),[]);if(!a)return l.a.createElement(y,null);var n=[{label:"No Group",value:"",data:new fe({name:""},a)}].concat(((null===a||void 0===a?void 0:a.groups)||[]).map((function(e){return{label:e.name,value:e.rowId,data:e}})));return l.a.createElement(xe.a,{onOpen:function(){return r(!0)},onClose:function(){return r(!1)},trigger:l.a.createElement("div",null,l.a.createElement("button",{className:"menuButton"},"\u25cf\u25cf\u25cf")),position:"left center"},l.a.createElement("div",{style:{backgroundColor:"#fff",border:"1px solid ".concat(t.color),padding:"10px",width:"200px",boxShadow:"0 2px .8rem ".concat(t.color)}},"Add to Group",l.a.createElement(Se.a,{placeholder:"Select or Create New",value:n.find((function(e){return e.data.projectIds.indexOf(t.rowId)>-1})),options:n,onCreateOption:function(e){var r=null===a||void 0===a?void 0:a.createGroup(e);t.setGroup({group:r})},onChange:function(e){return r=e.data,void t.setGroup({group:r});var r}}),"Set Emails",l.a.createElement(Se.a,{placeholder:"Select or Create New",isMulti:!0,value:t.emails.map((function(e){return{value:e,label:e}})),options:t.workSpace.emails.map((function(e){return{value:e,label:e}})),onCreateOption:t.createEmail,onChange:function(e){return t.setEmails((e||[]).map((function(e){return e.value})))}})))})),Ne=Object(m.a)((function(e){var t,r,a=e.project,n=e.dates,o=e.displayType,i=e.gridCols,s=e.isDragging,u=e.inheritBackgroundColor,d=Object(c.useState)(!1),p=Object(be.a)(d,2),m=p[0],f=p[1];return l.a.createElement("div",{className:"rowContainer",style:{boxShadow:"".concat(s||m?"0 2px .8rem":"0 0 0"," ").concat(a.color)}},l.a.createElement("div",{className:"row projectRow ".concat(s?"selected":""),style:{gridTemplateColumns:i,borderColor:a.color,borderWidth:"2px",borderStyle:"solid",borderTopColor:a.color,borderLeftColor:m?a.color:"rgba(0,0,0,0)",borderRightColor:m?a.color:"rgba(0,0,0,0)",borderBottomColor:m?a.color:"rgba(0,0,0,0)",backgroundColor:u?"rgba(255,255,255,0.75)":"#FFF"}},l.a.createElement(je,{expanded:a.expanded,setExpanded:a.setExpanded}),l.a.createElement("div",{className:"title",style:{color:a.color}},a.name),l.a.createElement("div",{className:"title",style:{color:a.color}},a.client),n.map((function(e,t){return l.a.createElement(Ee,{key:t,expanded:a.expanded,displayType:o,day:a.dateHash[e.format("YYYYMMDD")]})})),l.a.createElement("div",{className:"title sumCol",style:{color:a.color}},ke(a.timeAsHours(null===(t=n[0])||void 0===t?void 0:t.toISOString(),null===(r=n[n.length-1])||void 0===r?void 0:r.toISOString()),o)),l.a.createElement(Pe,{project:a,setOpen:f})),a.expanded?a.tags.map((function(e,t){return l.a.createElement(Te,{key:t,tag:e,dates:n,displayType:o,gridCols:i,inheritBackgroundColor:u})})):l.a.createElement(l.a.Fragment,null))})),Me=Object(m.a)((function(e){var t,r,a=e.project,n=e.dates,o=e.displayType,i=e.gridCols,c=e.index;return l.a.createElement(He.b,{key:null===a||void 0===a||null===(t=a.pid)||void 0===t?void 0:t.toString(),draggableId:null===a||void 0===a||null===(r=a.pid)||void 0===r?void 0:r.toString(),index:c},(function(e,t){return l.a.createElement("div",Object.assign({id:null===a||void 0===a?void 0:a.rowId,ref:e.innerRef,className:"rowContainer ".concat(t.isDragging?"selected":"")},e.draggableProps,e.dragHandleProps),l.a.createElement(Ne,{project:a,dates:n,displayType:o,gridCols:i,isDragging:t.isDragging}))}))})),We=function(){return l.a.createElement("div",{style:{height:"100px",display:"flex",alignItems:"center",justifyContent:"center"}},l.a.createElement("div",null,"-- No Projects Found --"))},Ae=function(){return l.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"3rem",borderTop:"1px dashed #888"}},l.a.createElement("div",null,"-- Empty --"))},Re=Object(m.a)((function(e){var t=e.group,r=e.setOpen;return l.a.createElement(xe.a,{onOpen:function(){return r(!0)},onClose:function(){return r(!1)},trigger:l.a.createElement("div",null,l.a.createElement("button",{className:"menuButton"},"\u25cf\u25cf\u25cf")),position:"left center"},l.a.createElement("div",{style:{backgroundColor:"#fff",border:"1px solid ".concat(t.color),padding:"10px",width:"200px",boxSizing:"border-box",boxShadow:"0 2px .8rem ".concat(t.color)}},l.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},l.a.createElement("label",{htmlFor:"name_".concat(t.rowId),style:{marginRight:"10px"}},"Name"),l.a.createElement("input",{name:"name_".concat(t.rowId),type:"text",value:t.name,onChange:function(e){t.setName(e.currentTarget.value)}})),l.a.createElement("div",{style:{display:"flex",marginTop:"20px",flexDirection:"column"}},l.a.createElement("label",{htmlFor:"color_".concat(t.rowId),style:{marginRight:"10px"}},"Set Color"),l.a.createElement("input",{style:{width:"100%"},name:"color_".concat(t.rowId),type:"color",value:t.color,onChange:function(e){t.setColor(e.currentTarget.value)}})),l.a.createElement("div",{style:{display:"flex",marginTop:"20px",flexDirection:"column"}},"Set Emails",l.a.createElement(Se.a,{placeholder:"Select or Create New",isMulti:!0,value:t.emails.map((function(e){return{value:e,label:e}})),options:t.workSpace.emails.map((function(e){return{value:e,label:e}})),onCreateOption:t.createEmail,onChange:function(e){return t.setEmails((e||[]).map((function(e){return e.value})))}}))))})),_e=Object(m.a)((function(e){var t,r,a=e.group,n=e.dates,o=e.displayType,i=e.gridCols,s=e.isDragging,u=Object(c.useState)(!1),d=Object(be.a)(u,2),p=d[0],m=d[1],f=a.color||"#ff8330";return l.a.createElement("div",{className:"rowContainer",style:{backgroundColor:f,boxShadow:"".concat(s||p?"0 2px .8rem":"0 0 0"," ").concat(f)}},l.a.createElement("div",{className:"row projectRow",style:{backgroundColor:f,borderColor:f,gridTemplateColumns:i}},l.a.createElement(je,{expanded:a.expanded,setExpanded:a.setExpanded}),l.a.createElement("div",{className:"title",style:{color:"white"}},a.name),l.a.createElement("div",{className:"title",style:{color:"white"}}),n.map((function(e,t){return l.a.createElement(Ee,{key:t,expanded:a.expanded,displayType:o,day:a.dateHash[e.format("YYYYMMDD")]})})),l.a.createElement("div",{className:"title sumCol",style:{color:"white"}},ke(a.timeAsHours(null===(t=n[0])||void 0===t?void 0:t.toISOString(),null===(r=n[n.length-1])||void 0===r?void 0:r.toISOString()),o)),l.a.createElement(Re,{group:a,setOpen:m})),a.expanded?l.a.createElement(l.a.Fragment,null,a.projects.length?a.projects.map((function(e,t){return l.a.createElement(Ne,{key:t,project:e,dates:n,displayType:o,gridCols:i,isDragging:s,inheritBackgroundColor:!0})})):l.a.createElement(Ae,null)):l.a.createElement(l.a.Fragment,null),l.a.createElement("div",null))})),Fe=Object(m.a)((function(e){var t,r,a=e.group,n=e.dates,o=e.displayType,i=e.gridCols,c=e.index;return l.a.createElement(He.b,{key:null===a||void 0===a||null===(t=a.rowId)||void 0===t?void 0:t.toString(),draggableId:null===a||void 0===a||null===(r=a.rowId)||void 0===r?void 0:r.toString(),index:c},(function(e,t){return l.a.createElement("div",Object.assign({id:null===a||void 0===a?void 0:a.rowId,ref:e.innerRef,className:"rowContainer ".concat(t.isDragging?"selected":"")},e.draggableProps,e.dragHandleProps),l.a.createElement(_e,{group:a,dates:n,displayType:o,gridCols:i,isDragging:t.isDragging}))}))})),Ge=Object(m.a)((function(e){var t=e.workSpace,r=e.displayType,a=e.dates,n="40px 150px 100px repeat(".concat(a.length,", 1fr) 75px 50px");return l.a.createElement("div",{className:"divCalendar container"},l.a.createElement(we,{dates:a,gridCols:n}),t.loading?l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"loading"},l.a.createElement(Ye,null))):l.a.createElement(He.a,{onDragEnd:t.orderProject},l.a.createElement(He.c,{droppableId:"calendarContainer",type:"containerDroppable"},(function(e,o){return l.a.createElement("div",Object.assign({id:"calendarContainer",ref:e.innerRef},e.droppableProps),t.orderedProjects.length?t.orderedProjects.map((function(e,t){if(!e)return l.a.createElement(l.a.Fragment,{key:t});switch(e.type){case"group":return l.a.createElement(Fe,{key:e.rowId,group:e,dates:a,displayType:r,gridCols:n,index:t});case"project":return l.a.createElement(Me,{key:e.rowId,dates:a,displayType:r,project:e,gridCols:n,index:t});case"tag":return l.a.createElement(Te,{key:e.rowId,tag:e,dates:a,displayType:r,gridCols:n});default:return l.a.createElement(l.a.Fragment,{key:t})}})):l.a.createElement(We,null))}))),l.a.createElement(Ie,{dates:a,rows:t.orderedProjects,gridCols:n,displayType:r}))}));function ze(e){return e.slice(1).split("&").map((function(e){return e.split("=")})).reduce((function(e,t){return e[t[0]]=t[1],e}),{})}var Be=Object(m.a)((function(e){var t=e.displayType,r=e.setDisplayType;function a(e){r(e),window.localStorage.setItem("displayType",e)}return l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(Le,{name:"Time",currentValue:t,value:"time",setValue:a}),l.a.createElement(Le,{name:"Rounded Time",currentValue:t,value:"roundedTime",setValue:a}),l.a.createElement(Le,{name:"Description",currentValue:t,value:"description",setValue:a}),l.a.createElement(Le,{name:"Time & Description",currentValue:t,value:"tasksAndTime",setValue:a}))})),Le=Object(m.a)((function(e){var t=e.name,r=e.currentValue,a=e.value,n=e.setValue;return l.a.createElement("button",{className:"calendarHeaderButton ".concat(a===r?"selected":""),onClick:function(){return n(a)}},t)})),Je=function(){var e=ze(Object(d.h)().search),t=e.startDate,r=e.endDate,a=Object(d.g)(),n={back:"/calendar?startDate=".concat(I()(t).subtract(1,"week").format("YYYY-MM-DD"),"&endDate=").concat(I()(r).subtract(1,"week").format("YYYY-MM-DD")),today:"/calendar?startDate=".concat(I()().startOf("week").format("YYYY-MM-DD"),"&endDate=").concat(I()().endOf("week").format("YYYY-MM-DD")),forward:"/calendar?startDate=".concat(I()(t).add(1,"week").format("YYYY-MM-DD"),"&endDate=").concat(I()(r).add(1,"week").format("YYYY-MM-DD"))};return Object(c.useEffect)((function(){t&&r||a.push("/calendar?startDate=".concat(I()().startOf("week").format("YYYY-MM-DD"),"&endDate=").concat(I()().endOf("week").format("YYYY-MM-DD")))}),[t,r]),l.a.createElement("div",null,l.a.createElement(p.b,{to:n.back},l.a.createElement("button",{className:"calendarHeaderButton"},"<")),l.a.createElement(p.b,{to:n.today,onClick:function(e){var a;n.today.split("?").pop()===window.location.search.split("?").pop()&&(e.stopPropagation(),null===(a=qe.selectedWorkSpace)||void 0===a||a.getTasks(I()(t),I()(r)).catch((function(e){alert(e),console.error(e)})))}},l.a.createElement("button",{className:"calendarHeaderButton"},"Today")),l.a.createElement(p.b,{to:n.forward},l.a.createElement("button",{className:"calendarHeaderButton"},">")))},Ve=Object(m.a)((function(e){var t=e.workSpace,r=e.startDate,a=e.endDate;return l.a.createElement("div",null,l.a.createElement("hr",null),l.a.createElement("h3",null,"Emails"),l.a.createElement("table",{style:{width:"100%"}},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{style:{width:"20rem"}},"Email"),l.a.createElement("th",null,"Projects"),l.a.createElement("th",{style:{width:"300px",textAlign:"right"}},"Email Types"))),l.a.createElement("tbody",null,t.emailRows.filter((function(e){return e.rows.length})).map((function(e,t){return l.a.createElement(Ue,{key:t,rows:e.rows,email:e.email,startDate:r,endDate:a})})))))})),Ue=Object(m.a)((function(e){var t,r=e.rows,a=e.email,n=e.startDate,o=e.endDate,i=r.reduce((function(e,t){return t instanceof se?e.concat([t]):t instanceof le?e.concat([t.project]):t instanceof fe?e.concat(t.projects):e}),[]),c=null===(t=a.split("@").shift())||void 0===t?void 0:t.split(".").shift(),s="Hi ".concat(c,", %0A%0A"),u="Timekeeping: ".concat(i.map((function(e){return"".concat(e.client," ").concat(e.name).trim()})).join(", ")),d=r.map((function(e){return"".concat(e.name," (").concat(e.roundedHours(n,o),")")})).join("%0A"),p=r.map((function(e){return["".concat(e.name," (").concat(e.roundedHours(n,o),")")].concat(e.tasks(n,o).map((function(e){return"     ".concat(e)}))).join("%0A")})).join("%0A");return l.a.createElement("tr",null,l.a.createElement("td",null,a),l.a.createElement("td",null,r.map((function(e){return l.a.createElement("div",{className:"emailProject",style:{color:e.color}},"(",e.roundedHours(n,o),") ",null===e||void 0===e?void 0:e.name)}))),l.a.createElement("td",null,l.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},l.a.createElement("a",{href:"mailto:".concat(a,"?subject=").concat(u,"&body=").concat(s+d),target:"_blank",rel:"noopener noreferrer"},l.a.createElement("button",{className:"calendarHeaderButton "},"Time")),l.a.createElement("a",{href:"mailto:".concat(a,"?subject=").concat(u,"&body=").concat(s+p),target:"_blank",rel:"noopener noreferrer"},l.a.createElement("button",{className:"calendarHeaderButton "},"Time and Description")))))})),Ze=function(){var e,t=ze(Object(d.h)().search),r=t.startDate,a=t.endDate,n=Object(c.useState)(window.localStorage.getItem("displayType")||"time"),o=Object(be.a)(n,2),i=o[0],s=o[1],u=[];if(r&&a)for(var p=I()(r);p.isBefore(I()(a),"day")||p.isSame(I()(a),"day");)u.push(p),p=p.add(1,"day");var m=null===(e=qe.selectedWorkSpace)||void 0===e?void 0:e.id;return Object(c.useEffect)((function(){qe.selectedWorkSpace&&r&&a&&qe.selectedWorkSpace.getTasks(I()(r),I()(a)).catch((function(e){alert(e),console.error(e)}))}),[m,r,a]),l.a.createElement(b,null,l.a.createElement("h2",null,"Calendar"),l.a.createElement("div",{style:{display:"flex",marginBottom:"20px"}},l.a.createElement(Be,{displayType:i,setDisplayType:s}),l.a.createElement("div",{style:{flex:1}}),l.a.createElement(Je,null)),qe.selectedWorkSpace?l.a.createElement(Ge,{workSpace:qe.selectedWorkSpace,displayType:i,dates:u}):"",qe.selectedWorkSpace&&qe.selectedWorkSpace.emails.length?l.a.createElement(Ve,{workSpace:qe.selectedWorkSpace,startDate:r,endDate:a}):l.a.createElement(l.a.Fragment,null))},$e=function(){return l.a.createElement(b,null,l.a.createElement("h2",null,"What is Toggl Calendar View?"),l.a.createElement("p",null,"An easy way to get daily information out of Toggl, and into another tool, by streamlining the copy-paste process"),l.a.createElement("p",null,"To get started, add your API Token in ",l.a.createElement(p.b,{to:"/settings"},"Settings")))},qe=new he;var Ke=function(){return l.a.createElement(d.d,null,l.a.createElement(d.b,{path:"/settings",component:v}),l.a.createElement(d.b,{path:"/calendar",component:Ze}),l.a.createElement(d.b,{path:"/main",component:$e}),l.a.createElement(d.b,{render:function(){return localStorage.getItem("workSpaceId")?l.a.createElement(d.a,{to:"/calendar"}):l.a.createElement(d.a,{to:"/main"})}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r(90);u.a.render(l.a.createElement(p.a,null,l.a.createElement(Ke,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[60,1,2]]]);
//# sourceMappingURL=main.7b2e0dc2.chunk.js.map